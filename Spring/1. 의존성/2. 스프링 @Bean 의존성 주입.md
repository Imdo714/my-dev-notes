# ðŸ“š ìžë°” - ìŠ¤í”„ë§ @Bean ì˜ì¡´ì„± ì£¼ìž…í•˜ê¸°

> ðŸ’¡ ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬í•´ì•¼ í•œë‹¤. ê°™ì€ ì´ë¦„ì„ ë¶€ì—¬í•˜ë©´, ë‹¤ë¥¸ ë¹ˆì´ ë¬´ì‹œë˜ê±°ë‚˜, ê¸°ì¡´ ë¹ˆì„ ë®ì–´ë²„ë¦¬ê±°ë‚˜ ì„¤ì •ì— ë”°ë¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

## ðŸ‘€ìŠ¤í”„ë§ìœ¼ë¡œ ìž‘ì„±í•˜ê¸°
* ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `@Configuration`ì´ ë¶™ì€ `AppConfig`ë¥¼ ì„¤ì •(êµ¬ì„±) ì •ë³´ë¡œ ì‚¬ìš©í•œë‹¤.
* `AppConfig`ì— ì„¤ì •ì„ êµ¬ì„±í•œë‹¤ëŠ” ëœ»ì˜ `@Configuration`ì„ ë¶™ì—¬ì¤€ë‹¤. 
* ê° ë©”ì„œë“œì— `@Bean`ì„ ë¶™ì—¬ì¤€ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.

```java
@Configuration
public class AppConfig {
    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }
    
    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }
    
    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
    
    @Bean
    public DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }
}
```
* `ApplicationContext`ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.
* ìŠ¤í”„ë§ ë¹ˆì€ `@Bean`ì´ ë¶™ì€ ë©”ì„œë“œì˜ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. (`memberService`, `orderService`)
* ì´ì „ì—ëŠ” ê°œë°œìžê°€ í•„ìš”í•œ ê°ì²´ë¥¼ `AppConfig`ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ì¡°íšŒí–ˆì§€ë§Œ, ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ í•„ìš”í•œ ìŠ¤í”„ë§ ë¹ˆ(ê°ì²´)ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤. 
* ìŠ¤í”„ë§ ë¹ˆì€ `ac.getBean()`ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ ì°¾ì„ ìˆ˜ ìžˆë‹¤.
```java
public class OrderServiceImpl implements OrderService {
    // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± 
    ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
    MemberService memberService = ac.getBean("memberService", MemberService.class);
    OrderService orderService = ac.getBean("orderService", OrderService.class);
}
```

> ì•„ëž˜ ì´ë¯¸ì§€ ì²˜ëŸ¼ ì»¨í„°ì´ë„ˆë¼ëŠ” ê°€ìƒì˜ ê³µê°„ì— ë©”ì„œë“œ ì´ë¦„ì´ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë“±ë¡ì´ ë˜ê³  ë¹ˆ ê°ì²´ì—ëŠ” ì£¼ì†Œ ê°’ì´ ë“¤ì–´ê°„ë‹¤.

![Image](https://github.com/user-attachments/assets/f06c157d-1bb8-42b3-a4ad-734cffd36e06)


## ðŸ¯ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒí•˜ê¸° 

* ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ëŠ” ê°€ìž¥ ê¸°ë³¸ì ì¸ ì¡°íšŒ ë°©ë²•
    * `ac.getBean(ë¹ˆì´ë¦„, íƒ€ìž…)`
    * `ac.getBean(íƒ€ìž…)`
* ì¡°íšŒ ëŒ€ìƒ ìŠ¤í”„ë§ ë¹ˆì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ `NoSuchBeanDefinitionException`

### ðŸ’£ì„¤ëª…
* `findBeanByName`ë©”ì„œë“œë¥¼ ì˜ˆë¥¼ ë“¤ì–´ ì„¤ëª…í•˜ë©´ í˜„ì œ `AppConfig`í´ëž˜ìŠ¤ì— `memberService`ë¼ëŠ” ë©”ì„œë“œ ëª…ì€ ë°˜í™˜ íƒ€ìž…ì„ 
* `MemberService`ì„ í•˜ê³ ìžˆê³  ë¦¬í„´ ê°’ì„ `MemberServiceImpl`êµ¬í˜„ì²´ë¥¼ ë¦¬í„´í•˜ê³  ìžˆë‹¤. ì¦‰, ë§¤ì„œë“œ ëª… ê³¼ íƒ€ìž…ì„ ëª¨ë‘ ë§žì¶°ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë” ì•ˆì „í•˜ê³  ëª…í™•í•˜ë‹¤.

* `findBeanByType`ë©”ì„œë“œëŠ” íƒ€ìž…ë§Œìœ¼ë¡œ ì¡°íšŒí•  ìˆ˜ë„ ìžˆìœ¼ë©°, ì´ ê²½ìš° í•´ë‹¹ íƒ€ìž…ì˜ ë¹ˆì´ ë‹¨ í•˜ë‚˜ë§Œ ë“±ë¡ë˜ì–´ ìžˆì–´ì•¼ í•œë‹¤.
* ë™ì¼ íƒ€ìž…ì˜ ë¹ˆì´ ì—¬ëŸ¬ ê°œì¼ ê²½ìš° `NoUniqueBeanDefinitionException`ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.

```java
class ApplicationContextBasicFindTest {
    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName() {
        MemberService memberService = ac.getBean("memberService", MemberService.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("ì´ë¦„ ì—†ì´ íƒ€ìž…ë§Œìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByType() {
        MemberService memberService = ac.getBean(MemberService.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("êµ¬ì²´ íƒ€ìž…ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName2() {
        MemberServiceImpl memberService = ac.getBean("memberService", MemberServiceImpl.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("ì—†ëŠ” ì´ë¦„ìœ¼ë¡œ ì¡°íšŒì‹œ ì˜ˆì™¸")
    void findBeanByNameX() {
        //ac.getBean("xxxxx", MemberService.class);
        Assertions.assertThrows(NoSuchBeanDefinitionException.class, () -> ac.getBean("xxxxx", MemberService.class));
    }
}
```

