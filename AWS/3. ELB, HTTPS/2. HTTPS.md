# 📚 AWS - SSL/TLS 를 이용한 HTTPS 연결

> 💡 HTTPS는 데이터를 서버와 주고 받을 때 암호화를 시켜서 통신을 하여 보안성이 좋다.

## SSL/TLS란? 
* HTTPS를 적용하기 위해서는 인증서를 발급받아야 한다. 
* **SSL/TLS** 쉽게 표현하자면 **HTTP를 HTTPS로 바꿔주는 인증서**이다. 
* **ELB**는 **SSL/TLS 기능**을 제공한다. **SSL/TLS 인증서를 활용해 HTTP가 아닌 HTTPS로 통신할 수 있게 만들어준다.**

## HTTPS 적용을 위해 인증서 발급받기
1.  `AWS Certificate Manager` 서비스로 들어가서 인증서 요청 버튼 누른다. 
2. 내가 인증 받고싶은 도메인을 입력하고 요청을 누른다.

<img width="2028" height="946" alt="Image" src="https://github.com/user-attachments/assets/1b6b11aa-b7e5-41f7-9fb8-d1f93508c9d1" />

* 요청을 누르면 아래 이미지 처럼 검증 대기중이 뜹니다. 이거는 이 도메인의 주인인지를 확인을 해주어야 합니다.
* 이 Route53에 있는 CNAME 이름 요청을 보내서 CNAME 값이 오면 도메인 주인이라고 믿어줍니다.

1. 위에 Route53에서 레코드 생성 버튼을 누르고 Route53에 접속을 하면 CNAME 값이 추가가 되면 인증서 발급이 성공 되었습니다.
<img width="1655" height="254" alt="Image" src="https://github.com/user-attachments/assets/753ee234-f28d-4575-927d-5e9f49e5c324" />

## ELB에 HTTPS 설정하기 

1. EC2에 아까 생성한 로드 벨러서에 들어가 리스너 추가 버튼을 클릭합니다.
2. 프로토콜을 HTTPS로 선택합니다.

* ELB로 요청이 들어오는데 HTTPS 프로토콜을 활용한 443번 포트로 요청이 들어온다면 내가 선택한 대상 그룹으로 요청 트래픽을 전달 해 주겠다 라는 뜻입니다.
<img width="1222" height="1193" alt="Image" src="https://github.com/user-attachments/assets/4af2ff24-675f-4dc1-9c1d-0d664e1f709f" />

1. 보안 리스너 설정에 보안 정책은 그냥 기본값 사용
2. SSL/TLS 서버 인증서는 ACM에서 선택하여 방금 `AWS Certificate Manager`에서 만들었던 인증서를 클릭해줍니다.
3. 그리고 추가 버튼을 클릭하면 HTTPS로 접속이 됩니다. 

<img width="1637" height="551" alt="Image" src="https://github.com/user-attachments/assets/492f1057-04ed-48fe-a248-3762f978380f" />

## HTTP요청도 HTTPS로 전환 설정 하기

1. 로드 벨러서에서 기존 리스너에 80번 리스너를 삭제해주고 새로운 리스너를 생성해 주어야 한다.
* HTTP 80포트로 접속을하면 HTTPS 443포트로 리다렉션을 해주겠다 라는 뜻입니다.
* 이렇게 하면 이제 HTTP로 접속을해도 자동으로 HTTPS로 리다렉션 시켜주게 됩니다.
<img width="1219" height="1168" alt="Image" src="https://github.com/user-attachments/assets/f3e6689c-98e0-4ecb-8510-9360add2e035" />
