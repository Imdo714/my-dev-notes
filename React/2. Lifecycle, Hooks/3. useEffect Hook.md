# ğŸ“š React - useEffect ì‚¬ì´ë“œ ì´í™íŠ¸ ì²˜ë¦¬

> ğŸ’¡ `useEffect`ëŠ” `Mounting`, `Updating`, `Unmounting`ë¥¼ í•©ì¹œê±°ë‘ ë˜‘ê°™ì€ íš¨ê³¼ë¥¼ ë‚¸ë‹¤.

## â­useEffect ë€?
* `useEffect`ëŠ” Reactì—ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ëœ ì´í›„ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì‘ì—…(`Side effect`)ì„ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©í•˜ëŠ” `Hook`ì…ë‹ˆë‹¤.
* ì—¬ê¸°ì„œ `Side effect`ëŠ” componentê°€ ëœë”ë§ ëœ ì´í›„ì— ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í•˜ëŠ” ë¶€ìˆ˜ì ì¸ íš¨ê³¼ë“¤ì„ ëœ»í•©ë‹ˆë‹¤. 
* ì´ëŸ¬í•œ ê¸°ëŠ¥ìœ¼ë¡œ ì¸í•´ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œë„ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í–ˆë˜ ìƒëª…ì£¼ê¸° ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 

## ğŸ”¥useEffect ì‚¬ìš© ë²•
* `useEffect`ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸(ì²˜ìŒ ë Œë”ë§)ë˜ê±°ë‚˜, ì—…ë°ì´íŠ¸(ìƒíƒœ ê°’ ë³€ê²½)ë  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
* ì˜ì¡´ì„± ë°°ì—´([])ì„ í†µí•´ ì–¸ì œ ì‹¤í–‰í• ì§€ ì¡°ê±´ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì˜ì¡´ì„± ë°°ì—´ì„ ë¹ ëœ¨ë¦¬ë©´ ë¶ˆí•„ìš”í•œ ì¬ì‹¤í–‰ ë°˜ë³µì´ ë°œìƒ í•´ ì„±ëŠ¥ ë¬¸ì œ ê°€ ìƒê¸´ë‹¤.
* ë¦¬í„´ë˜ëŠ” í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŒ…(`Unmounting`) ì‹œ ë˜ëŠ” ë‹¤ìŒ `effect`ì‹¤í–‰ ì§ì „ì— ì‹¤í–‰ë©ë‹ˆë‹¤.
```javascript
useEffect(() => {
  // Mount, Updateì‹œ ì‹¤í–‰í•  ì‘ì—… (effect)
  return () => {
    // UnMountì‹œ ì‹¤í–‰í•  ì‘ì—…
  };
}, [ì˜ì¡´ì„±]);
```

### 1. ë§ˆìš´íŠ¸ ì‹œ í•œë²ˆë§Œ ì‹¤í–‰ (`componentDidMount`ì—­í• )
```javascript
useEffect(() => {
  console.log("ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ë¨");
}, []);
```
### 2. íŠ¹ì • ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰ (`componentDidUpdate`ì—­í• )
```javascript
useEffect(() => {
    console.log("countê°€ ë³€ê²½ë¨:", count);
}, [count]);
```
### 3. ì •ë¦¬(clean-up) ë¡œì§ ì¶”ê°€ (`componentWillUnmount` ì—­í• )
```javascript
useEffect(() => {
    const timer = setInterval(() => {
        console.log("1ì´ˆë§ˆë‹¤ ì‹¤í–‰");
    }, 1000);

    return () => {
        clearInterval(timer); // ì–¸ë§ˆìš´íŠ¸ ì‹œ íƒ€ì´ë¨¸ ì œê±°
        console.log("íƒ€ì´ë¨¸ ì •ë¦¬");
    };
}, []);
```

## ğŸŒ±ì˜ˆì‹œ ì½”ë“œ 
* ë²„íŠ¼ í´ë¦­ì‹œ `setCount`í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ `state`ê°’ì„ +1ì”© ì¦ê°€í•©ë‹ˆë‹¤.
* `useEffect`ë¥¼ ì¶”ê°€í•˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ ë ë•Œë§ˆë‹¤ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.
```javascript
import React, { useState, useEffect } from "react";

const Count = () => {
    const [count, setCount] = useState(0);

    useEffect(() => {
        console.log('state ë³€ê²½ ëœë”ë§ ë¨');
    });

    return(
         <div>
            <p>You clicked {count} times</p>
            <button onClick={() => setCount(count + 1)}>
                Click me
            </button>
        </div>
    )
}

export default Count;
```

## â„ï¸ëœë”ë§ ë§ˆë‹¤ ì‹¤í–‰ ?
* `useEffect`ë¥¼ ì‚¬ìš©í•˜ë©´ ë§¨ ì²˜ìŒ ëœë”ë§ì´ ë ë•Œ í•œë²ˆ ì‹¤í–‰ì´ ë˜ê³  
* `state`ê°’ì´ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ `useEffect`ê°€ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤. 
* ì¦‰, ì¹´ìš´íŠ¸ ë²„íŠ¼ì„ ëˆ„ë¥¼ë•Œ ë§ˆë‹¤ ëœë”ë§ì´ ê³„ì† ì‹¤í–‰ ë©ë‹ˆë‹¤. 

```javascript
useEffect(() => {
    console.log('state ë³€ê²½ ëœë”ë§ ë¨');
});
```

## ğŸƒëœë”ë§ ì¡°ì ˆí•˜ê¸°
* í˜„ì œ useEffect í•¨ìˆ˜ë¥¼ ë§¤ë²ˆ ëœë”ë§ ë  ë•Œë§ˆë‹¤ ì‹¤í–‰í•œë‹¤.
* ë§Œì•½ `useEffect`ì— ë¬´ê±°ìš´ ì‘ì—…ì„ í•˜ê²Œ ëœë‹¤ë©´ êµ‰ì¥íˆ ë¹„íš¨ìœ¨ì ì´ë‹¤.


* ì˜ˆë¥¼ ë“¤ì–´ nameì´ë¼ëŠ” `state`ê°’ì´ ì‘ì„±ë ë•Œë§ˆë‹¤ ëœë”ë§ì´ ëœë‹¤ë©´ ë„ˆë¬´ ë¹„íš¨ìœ¨ì ì´ë‹¤.
* ì¹´ìš´íŠ¸ ë²„íŠ¼ë§Œ ëˆŒë €ì„ ë•Œ ëœë”ë§ì´ ë˜ê³  ì‹¶ì„ ë•ŒëŠ”
* ì‘ì—…ì„ ì–¸ì œ ì‹¤í–‰í• ì§€ ì˜ì¡´ì„± ë°°ì—´ì„ í†µí•´ ì œì–´ í•˜ì—¬ `state`ê°’ì´ ë°”ë€”ë•Œë§Œ ì‹¤í–‰ í•˜ê²Œ í•  ìˆ˜ ë„ ìˆë‹¤.

 1. [x] **_ë¬´ê±°ìš´ ì‘ì—…ì´ë‚˜ íŠ¹ì • ìƒí™©ì—ì„œë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•  ì½”ë“œëŠ” í•´ë‹¹ `state`ë§Œ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ê³  ë”°ë¡œ `useEffect`ë¡œ ë¶„ë¦¬í•´ë‘ë©´ íš¨ìœ¨ì ì…ë‹ˆë‹¤._**

```javascript
const Count = () => {
    const [count, setCount] = useState(0);
    const [name, setName] = useState('');
    
    useEffect(() => {
        console.log('count ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰');
    }, [count]);

    useEffect(() => {
        console.log('name ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ì‹¤í–‰');
    }, [name]);
```

## ğŸŒì •ë¦¬(clean-up) ë¡œì§ ì„¤ëª…
* íƒ€ì´ë¨¸ ì‹œì‘ ë²„íŠ¼ì„ ì´ìš©í•´ `showTimer`ì´ `true`ì´ë©´ íƒ€ì´ë¨¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹œì‘?(ë³´ì—¬ì£¼ê³ )í•˜ê³  
* íƒ€ì´ë¨¸ ì‹œì‘ ë²„íŠ¼ì„ í•œë²ˆ ë” ëˆ„ë¥´ë©´ `true`ì—ì„œ `flase`ë¡œ ë°”ë€Œê¸° ë•Œë¬¸ì— `<Timer />` ì»´í¬ë„ŒíŠ¸ëŠ” ì¢…ë£Œê°€ ë©ë‹ˆë‹¤.
```javascript
function App() {
    const [showTimer, setShowTimer] = useState(false);
    return (
        <div>
            { showTimer && <Timer /> }
            <button onClick={ () => setShowTimer(!showTimer)}>íƒ€ì´ë¨¸ ì‹œì‘</button>
        </div>
    )
}
```
* íƒ€ì´ë¨¸ ì‹œì‘ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ 1ì´ˆë§ˆë‹¤ ì½˜ì†”ì´ ì˜ ì°íˆëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
* ì´ì œ ë²„íŠ¼ì„ í•œë²ˆ ë” ëˆŒëŸ¬ ì¢…ë£Œë¥¼ í–ˆëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³  ì½˜ì†”ì—ëŠ” íƒ€ì´ë¨¸ê°€ ê³„ì† ì°íˆê³  ìˆìŠµë‹ˆë‹¤. 
* ì™œëƒí•˜ë©´ `setInterval`ë¡œ íƒ€ì´ë¨¸ë¥¼ ë§Œë“¤ì—ˆëŠ”ë° ì´ ë§Œë“  íƒ€ì´ë¨¸ë¥¼ ì •ë¦¬í•´ ì£¼ì§€ ì•Šì•„ì„œ ì»´í¬ë„ŒíŠ¸ëŠ” ì¢…ë£Œë˜ì—ˆì§€ë§Œ 
* íƒ€ì´ë¨¸ëŠ” ê³„ì† ì‘ë™ í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.
```javascript
const Timer = () => {
    useEffect(() => {
        const timer = setInterval(() => {
            console.log("1ì´ˆë§ˆë‹¤ ì‹¤í–‰");
        }, 1000);
    }, []);
}
```
* ì–¸ë§ˆìš´íŠ¸ ë‹¨ê³„ ì¦‰, ì»´í¬ë„ŒíŠ¸ê°€ DOMì—ì„œ ì œê±°ë ë•Œ ìš°ë¦¬ê°€ ë§Œë“  íƒ€ì´ë¨¸ë„ ê°™ì´ ì œê±°(ì •ë¦¬ ì‘ì—…)ë¥¼ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
* ì•„ë˜ ì½”ë“œ ì²˜ëŸ¼ ë¦¬í„´ì— ì •ë¦¬ ì‘ì—… ë¡œì§ì„ ì´ìš©í•´ ì •ë¦¬ ì‘ì—…ì„ í•´ì£¼ë©´ 
* ì–¸ë§ˆìš´íŠ¸ ì‹œì— íƒ€ì´ë¨¸ëŠ” ì •ë¦¬ê°€ ë©ë‹ˆë‹¤.
```javascript
const Timer = () => {
    useEffect(() => {
        const timer = setInterval(() => {
            console.log("1ì´ˆë§ˆë‹¤ ì‹¤í–‰");
        }, 1000);

        return () => {
            clearInterval(timer); 
            console.log("íƒ€ì´ë¨¸ ì •ë¦¬");
        };
    }, []);
}
```
