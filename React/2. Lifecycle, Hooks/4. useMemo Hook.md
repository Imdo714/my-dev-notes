# ğŸ“š React - useMemo ê³„ì‚° ê²°ê³¼ ìºì‹±

> ### ğŸ’¡ `useMemo`ëŠ” ì¬ë Œë”ë§ ì‚¬ì´ì— ê³„ì‚° ê²°ê³¼ë¥¼ ìºì‹±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” `React Hook` ì…ë‹ˆë‹¤.

## ğŸŒŠuseMemo ë€?
* useMemoëŠ” React ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³„ì‚° ë¹„ìš©ì´ í° ì—°ì‚°ì„ ìµœì í™”í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” Hookì…ë‹ˆë‹¤.
* useMemoëŠ” ì´ì „ì— ê³„ì‚°ëœ ê°’ì„ ê¸°ì–µí•˜ê³  í•´ë‹¹ ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” ì´ì „ ê°’ì„ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤.
* _**ì¦‰, ìì£¼ ì‚¬ìš©í•˜ëŠ” ê°’ì„ ë§¨ ì²˜ìŒ ê³„ì‚°í•  ë•Œ ìºì‹± í•˜ì—¬ ê°’ì´ í•„ìš”í•  ë•Œë§ˆë‹¤ ë©”ëª¨ë¦¬ì—ì„œ êº¼ë‚´ì„œ ì‚¬ìš©í•œë‹¤.**_ 

## ğŸŒ»useMemo ì‚¬ìš© ë²•
* `useMemo`ëŠ” 2ê°œì˜ ì¸ìë¥¼ ë°›ìŠµë‹ˆë‹¤. ì²«ë²ˆì§¸ ì¸ìëŠ” ì½œë°± í•¨ìˆ˜ ë‘ ë²ˆì§¸ ì¸ìë¡œëŠ” ë°°ì—´ì„ ë°›ìŠµë‹ˆë‹¤.
* ì²« ë²ˆì§¸ ì¸ìì—ì„œëŠ” ìš°ë¦¬ê°€ ë©”ëª¨ë¦¬ì— ì „í•´ì¤„ ê°’ì„ ê³„ì‚°í•´ì„œ ë¦¬í„´í•´ ì¤€ë‹¤.
* ë‘ ë²ˆì§¸ ì¸ìë¡œëŠ” ì˜ì¡´ì„± ë°°ì—´ì„ ë°›ì•„ íŠ¹ì • `state` ê°’ì´ ì—…ë°ì´íŠ¸ ë  ë•Œë§Œ ë‹¤ì‹œ ë©”ëª¨ë¦¬ì— ì˜¬ë ¤ì¤€ë‹¤.
```javascript
const visibleTodos = useMemo(() => {
    return calculate()
}, [])
```

## ğŸŒuseMemo ì£¼ë¡œ ì‚¬ìš© í• ë•Œ 
* ì»´í¬ë„ŒíŠ¸ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ë‹¤ì‹œ ë Œë”ë§ë˜ë©´ì„œ ë¬´ê±°ìš´ ì—°ì‚°ì„ ë¦¬ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ë°˜ë³µí•˜ê³  ì‹¶ì§€ ì•Šì„ ë•Œ
* ë™ì¼í•œ ê°’ì„ ê³„ì† ê³„ì‚°í•  í•„ìš” ì—†ì´, ì˜ì¡´ì„± ê°’ì´ ë°”ë€” ë•Œë§Œ ì¬ê³„ì‚°í•˜ê³  ì‹¶ì„ ë•Œ
* ê°ì²´, ë°°ì—´ì„ `props`ë¡œ ë„˜ê¸¸ ë•Œ _**ì°¸ì¡° ì£¼ì†Œ**_ ìœ ì§€ í•´ì•¼í•  ë•Œ

## ğŸ‘»ë©”ëª¨ë¦¬ êº¼ë‚´ ì“°ê¸° ì˜ˆì‹œ (Memoization)
* `useMemo`ëŠ” ë§ˆìš´íŠ¸ ë ë•Œ í•¨ìˆ˜ê°€ ì‹¤í–‰ ë˜ê³  ê²°ê³¼ ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥(`Memoization`) í•©ë‹ˆë‹¤.
* ê·¸ í›„ì— ë²„íŠ¼ì„ í´ë¦­ì‹œ `handleClick` í•¨ìˆ˜ê°€ ì‹¤í–‰ì´ ë˜ì–´ `res`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. 
* `res`ëŠ” ê²°ê³¼ ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥ì´ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— êµ³ì´ í•œë²ˆ ë” `calculate()`í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  ë©”ëª¨ë¦¬ì—ì„œ ê²°ê³¼ ê°’ì„ êº¼ë‚´ ì‚¬ìš©í•©ë‹ˆë‹¤. 
* ê·¸ëŸ¬ë©´ ì´ì œ ë²„íŠ¼ì„ í´ë¦­ì‹œ `state`ê°’ì´ ë³€ê²½ë˜ì–´ ë¦¬ ëœë”ë§ì´ ë˜ì–´ `calculate()`ê°’ì´ ì´ˆê¸°í™” ë˜ì§€ ì•Šê³  ë©”ëª¨ë¦¬ì œì´ì…˜í•œë‹¤.
> ì´ì œ ì¤‘ë³µ ì—°ì‚°ì„ í”¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ë¥¼ ì¡°ê¸ˆ ë” ì“°ë”ë¼ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì„ ìµœì í™” í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.
```javascript
import React, { useState, useMemo } from "react";

const calculate = () => {
    console.log('í•¨ìˆ˜ ì‹¤í–‰');
    return 3;
};

const MemoApp = () => {
    const [result, setResult] = useState(1);

    const res = useMemo(() => {
        return calculate();
    }, []);

    const handleClick = () => { setResult(res); }

    return (
        <div>
            <p>{ result }</p>
            <button onClick={ handleClick }>
                Click me
            </button>
        </div>
    );
}

export default Count;
```
* ì•„ë˜ ì½”ë“œ ì²˜ëŸ¼ ì˜ì¡´ ë°°ì—´ì— `result`ë¼ëŠ” ìƒíƒœ ê°’ì„ ë„£ìœ¼ë©´ `result`ê°€ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ `calculate()`í•¨ìˆ˜ ê°€ ì‹¤í–‰ëœë‹¤. 
* ì´ë•Œ `res`ì˜ ê²°ê³¼ê°’ì´ ì´ì „ ê°’ê³¼ ê°™ë”ë¼ë„ `result` ìƒíƒœ ê°’ì´ ë°”ë€Œì—ˆê¸° ë•Œë¬¸ì— `calculate()`ëŠ” ë‹¤ì‹œ ì‹¤í–‰ëœë‹¤.
```javascript
    const res = useMemo(() => {
        return calculate();
    }, [result]);
```

## ğŸ’»ì°¸ì¡° ì£¼ì†Œ ì˜ˆì‹œ (ì¤‘ìš” ì£¼ë¡œ ì‚¬ìš©)
* í˜„ì œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë²„íŠ¼ì„ í´ë¦­ì‹œ `state`ê°’ì´ ë³€ê²½ ë˜ê¸° ë•Œë¬¸ì— ë¦¬ ëœë”ë§ì´ ë©ë‹ˆë‹¤.
* ê·¸ëŸ¬ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ì— `user`ëŠ” **_ê°ì²´ì´ê¸°_** ë•Œë¬¸ì— ë¦¬ ëœë”ë§ ë ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ ì°¸ì¡°ê°’ì´ ìƒê¸´ë‹¤. ê·¸ëŸ¬ë©´ `Child`ëŠ” ê³„ì† ë¦¬ëœë”ë§ ëœë‹¤.
* ê²°êµ­ `Child`ëŠ” `props`ì˜ ì°¸ì¡°ê°€ ë§¤ë²ˆ ë°”ë€Œì–´ì„œ `useMemo`ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ `state`ê°’ì´ ë³€ê²½ ë ë•Œ ë§ˆë‹¤ ê³„ì† ë¦¬ ëœë”ë§ì´ ë˜ì—ˆë‹¤.  
```javascript
// ì»´í¬ë„ŒíŠ¸ì„ 
const Child = useMemo(({ user }) => {
    console.log('Child ë Œë”ë§');
    return <div>{user.name}</div>;
});

const Parent = () => {
    const [count, setCount] = useState(0);
    const user = { name: 'í™ê¸¸ë™' };

  return (
    <div>
      <Child user={user} /> // ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œ
      <button onClick={() => setCount(count + 1)}>ì¦ê°€</button>
    </div>
  );
};
```
* í•´ê²° ë°©ë²•ì€ `user`ì„ ë§ˆìš´íŠ¸ ë˜ì—ˆì„ ë•Œì˜ ì£¼ì†Œ ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ì—¬ 
* `props`ë¡œ ë„˜ê²¨ì£¼ë©´ `ìƒíƒœ` ê°’ì´ ë³€ê²½ ë˜ì–´ë„ ë¦¬ ëœë”ë§ì´ ë˜ì–´ë„ ì£¼ì†Œ ê°’ì€ ë°”ë€Œì§€ ì•Šê³  ë©”ëª¨ë¦¬ì—ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— `Child`ë„ ë”ì´ìƒ ë¦¬ ëœë”ë§ ë˜ì§€ ì•Šê²Œ ë˜ì—ˆë‹¤.
```javascript
const user = useMemo(() => {
    return { name: 'í™ê¸¸ë™' };
}, []);
```