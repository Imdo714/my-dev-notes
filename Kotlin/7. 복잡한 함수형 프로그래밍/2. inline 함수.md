# π“ Kotlin -  inline ν•¨μ

> π’΅inline ν•¨μλ” ν•¨μ νΈμ¶ μ‹, κ·Έ μλ¦¬μ— ν•¨μ λ‚΄λ¶€ λ΅μ§μ΄ μ§μ ‘ μ‚½μ…λκΈ° λ•λ¬Έμ— μ„±λ¥ μµμ ν™”μ— λ„μ›€μ΄ λ  μ μμµλ‹λ‹¤.

## π¤”inline ν•¨μ λ€?
- ν•¨μμ— `inline`ν‚¤μ›λ“λ¥Ό λ¶™μ΄λ©΄, ν•¨μλ¥Ό νΈμ¶ν•λ” μ½μ— ν•¨μ λ³Έλ¬Έμ„ λ¶™μ—¬ λ„£κ² λ©λ‹λ‹¤.
- μ¦‰, `main()`ν•¨μμ—μ„ `add()`ν•¨μλ¥Ό νΈμ¶ν•λ©΄ λ¥Ό νΈμ¶ν•λ” λ€μ‹  λ§μ… λ΅μ§ μμ²΄κ°€ `main()`ν•¨μ μ•μΌλ΅ μΈλΌμ΄λ‹ λλ‹¤.
```kotlin
inline fun add(num1: Int, num2: Int): Int {
    return num1 + num2
}

fun main() {
    val num1 = 1
    val num2 = 2
    val result = add(num1, num2)
}
```
- Javaμ½”λ“λ΅ Decompileν•΄ λ³΄λ©΄ ν•¨μ νΈμ¶μ΄ μ•„λ‹ ν•¨μ λ΅μ§μ΄ νΈμ¶ λμ—λ‹¤.
```java
public static final void main() {
    int num1 = 1;
    int num2 = 2;
    int var10000 = num1 + num2;
}
```

## π“’inline ν•¨μ νΉμ§•
-  `exec`μ΄λΌλ” ν•¨μλ¥Ό νλΌλ―Έν„°λ΅ λ°›λ” `repeat`ν•¨μλ¥Ό μΈλΌμ΄λ‹ μ‹μΌ°λ‹¤κ³  ν•΄λ³΄μ. μ΄ μ½”λ“λ¥Ό μ»΄νμΌν•κ² λλ©΄
```kotlin
fun main() {
    repeat(2) { println("Hello World") }
}

inline fun repeat(times: Int, exec: () -> Unit) {
    for (i in 1..times) {
    exec()
    }
}
```
- `Hello World`λ¥Ό μ¶λ ¥ν•λ” λλ‹¤κΉμ§€ `main`ν•¨μ μ•μΌλ΅ μΈλΌμΈλ‹ λ κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.
- **π¨μ¦‰, inline ν•¨μλ” λ‚ μμ‹ λΏ μ•„λ‹λΌ λ‚μ™€ μ—°κ΄€λ λ‹¤λ¥Έ ν•¨μλ„ μΈλΌμ΄λ‹ μ‹ν‚¤λ” κ²ƒμ΄λ‹¤.π¨**
```java
public static final void main() {
    int i$iv = 1;
    
    while(true) {
        System.out.println("Hello World");
        if (i$iv == 2) {
            return;
        }
        ++i$iv;
    }
}
```
-  λ¬Όλ΅ , λ¨λ“  κ²½μ° μΈλΌμΈλ‹ μ‹ν‚¤λ” κ²ƒμ€ μ•„λ‹λ‹¤.
- μλ¥Ό λ“¤μ–΄ μ•„λ μ½”λ“μ™€ κ°™μ΄ λ‹¤λ¥Έ ν•¨μλ¥Ό μ• μ μ—†μ„ λ•λ” μΈλΌμΈλ‹μ„ μ‹ν‚¬ μκ°€ μ—†λ‹¤.
- `main()`ν•¨μμ—μ„ `exact`λΌλ” ν•¨μλ¥Ό λ°›μ•„μ„ `repeat`μΌλ΅ κ·Έλ€λ΅ λ„κΈ°κ³ μμµλ‹λ‹¤. μ΄λ• `exact`μ— λ¬΄μ—‡μ΄ λ“¤μ–΄κ°μ§€ λ¨λ¥΄κ³  `main()`ν•¨μ λ°”κΉ¥μ—μ„ μ• μ μκΈ° λ•λ¬Έμ— μΈλΌμ΄λ‹ λμ§€ μ•μµλ‹λ‹¤.
```kotlin
fun main(exec: () -> Unit) {
    repeat(2, exec)
}

inline fun repeat(times: Int, exec: () -> Unit) {
    for (i in 1..times) {
        exec()
    }
}
```

- ν•¨μ νλΌλ―Έν„°λ¥Ό λ¨λ¥΄λ” κ²½μ°μ— μΌλΌμ΄λ‹ λμ§€ μ•λ” κ²ƒ μ™Έμ—λ„ κ°•μ λ΅ μΈλΌμΈλ‹μ„ λ§‰μ„ μ μλ‹¤.
- ν•¨μ μ•μ— `noinline`μ§€μ‹μ–΄λ¥Ό λ¶™μ—¬μ£Όλ” κ²ƒμ΄λ‹¤.
- `noinline`μ§€μ‹μ–΄ λ•λ¬Έμ— μΈλΌμΈλ‹μ„ λ§‰μ„ μ μλ‹¤.

```kotlin
fun main() {
    repeat(2) { println("Hello World") }
}

inline fun repeat(
    times: Int,
    noinline exec: () -> Unit // noinline μ§€μ‹μ–΄λ¥Ό λ¶™μ€λ‹¤!
) {
    for (i in 1..times) {
        exec()
    }
}
```
- `noinline`μ§€μ‹μ–΄ λ•λ¬Έμ— Decompileν•΄ λ΄λ„ μΈλΌμΈλ‹μ΄ λμ§€ μ•μµλ‹λ‹¤.
```java
public static final void main() {
    Function0 exec$iv = (Function0)null.INSTANCE;
    int i$iv = 1;
    while(true) {
        exec$iv.invoke(); // exec νλΌλ―Έν„°κ°€ noinlineμΌλ΅ μΈν•΄ μΈλΌμ΄λ‹ λμ§€ μ•μ•λ‹¤!!
        if (i$iv == 2) {
            return;
        }
        ++i$iv;
    }
}
```

## π“–μ”μ•½ 
| κ°λ…                 | μ„¤λ…                                                        |
| ------------------ | --------------------------------------------------------- |
| `inline` ν•¨μ        | ν•¨μ νΈμ¶μ„ μ½”λ“μ— μ§μ ‘ μ‚½μ…(μΈλΌμ΄λ‹)ν•μ—¬ μ„±λ¥ ν–¥μƒ μ λ„                         |
| `noinline`         | νΉμ • ν•¨μν• νλΌλ―Έν„°λ” μΈλΌμ΄λ‹ν•μ§€ μ•λ„λ΅ μ§€μ •ν•  λ• μ‚¬μ©                          |
