# π“ Kotlin - Generic Constraints And Generic Function

> π’΅

## μμ  μ½”λ“
```kotlin
class Cage5<T> {
    private val animals: MutableList<T> = mutableListOf()

    fun getFirst(): T {
        return animals.first()
    }

    fun put(animal: T) {
        this.animals.add(animal)
    }

    fun moveFrom(cage: Cage2<T>) {
        this.animals.addAll(cage.animals)
    }
}
```

```kotlin
abstract class Animal(
  val name: String,
)

abstract class Fish(name: String) : Animal(name)

// κΈλ¶•μ–΄
class GoldFish(name: String) : Fish(name)

// μ‰μ–΄
class Carp(name: String) : Fish(name)
```

## μ λ„¤λ¦­ μ μ•½ κ±ΈκΈ°

- μ°λ¦¬λ” `Cage`ν΄λμ¤μ— λ™λ¬Όλ§ λ„£κ³  μ‹¶μ—λ‹¤. ν•μ§€λ§ `Cage`ν΄λμ¤μ— μ«μλ‚ λ¬Έμμ—΄λ„ λ„£μ„ μ μλ‹¤.
- μ–΄λ–»κ² ν•λ©΄ νƒ€μ… νλΌλ―Έν„°μ— `Animal`κ³Ό `Animal`ν•μ„ νƒ€μ…λ§ λ“¤μ–΄μ¤κ² ν•  μ μμ„κΉ? 
```kotlin
val intCage = Cage5<Int>()
val strCage = Cage5<String>()
```

- ν•΄κ²° λ°©λ²•μ€ νƒ€μ… νλΌλ―Έν„°μ— μ μ•½μ„ μ£Όλ©΄ λλ‹¤. μ΄λ¥Ό μ λ„¤λ¦­ μ μ•½μ΄λΌ λ¶€λ¥Έλ‹¤.
- νƒ€μ… νλΌλ―Έν„° `T`μλ¦¬μ— `Animal`κ³Ό `Animal`μ ν•μ„ ν΄λμ¤λ§ μ¤κ² ν•κ³  μ‹¶λ‹¤λ©΄, `T : Animal`μ„ μ‚¬μ©ν•λ©΄ λλ‹¤.
- μ΄λ ‡κ² λλ©΄ `Cage5`μ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ§€μ •ν•  λ• Int λ‚ String μ„ μ‚¬μ©ν•  μ μ—†κ² λλ‹¤.
```kotlin
class Cage5<T : Animal> {
    private val animals: MutableList<T> = mutableListOf()
}

fun main() {
    val goldFishCage = Cage2<GoldFish>() // Animalμ ν•μ„ ν΄λμ¤λΌμ„ κ°€λ¥
    val intCage = Cage5<Int>() // Error: Type argument is not within its bounds.   
}
```

- λ§μ•½, νƒ€μ… νλΌλ―Έν„° T μ— μ—¬λ¬ μ μ•½μ„ λ‘κ³  μ‹¶λ‹¤λ©΄ λ¬Έλ²•μ΄ μ΅°κΈ λ‹¬λΌμ§„λ‹¤.
- ν΄λμ¤ μ΄λ¦„κ³Ό νƒ€μ… νλΌλ―Έν„° λ’¤μ— where ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.
- μ•„λλ” T νƒ€μ…μ΄ Animalμ ν•μ„ νƒ€μ…μ΄μ, Comparable μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• κ²½μ°μ΄λ‹¤.
```kotlin
class Cage5<T>(
    private val animals: MutableList<T> = mutableListOf() 
) where T : Animal, T : Comparable<T> {
    
}
```

## μ λ λ‹‰ ν•¨μ
- μ”κµ¬μ‚¬ν•­ : `Cage`ν΄λμ¤ μ•μ— μλ” λ™λ¬Όλ“¤μ„ μμ„λ€λ΅ μ •λ ¬ν•΄ μ¶λ ¥ν•λ” ν•¨μ λ§λ“¤κΈ° 
- νƒ€μ… νλΌλ―Έν„° `T`μ— `Animal`μ΄ λ“¤μ–΄μ¤λ©΄μ„ `Comparable`μ„ κµ¬ν„ν•κ³  μκΈ° λ•λ¬Έμ— `printAfterSorting`ν•¨μμ²λΌ λ°”λ΅ μ •λ ¬μ΄ κ°€λ¥
- `Comparable<T>`λ¥Ό νƒ€μ… νλΌλ―Έν„°`T`κ°€ κµ¬ν„ν•κ³  μμ–΄ μ •λ ¬μ΄ μ‰½λ‹¤.

```kotlin
class Cage5<T>(
    private val animals: MutableList<T> = mutableListOf()
) where T : Animal, T : Comparable<T> {
    fun printAfterSorting() {
        this.animals.sorted()
            .map { animal: Animal -> animal.name }
            .let(::println)
    }
}
```

- μ”κµ¬μ‚¬ν•­ : `Animal` ν΄λμ¤μ μƒλ΅μ΄ ν•μ„ νƒ€μ…μΈ `Bird`λ¥Ό λ§λ“¤μ–΄μ„ `Bird`λ„ `Comparable`λ¥Ό κµ¬ν„ν•κ² λ§λ“μ‹μ¤
- μ΄λ ‡κ² `Generate Class`λ¥Ό μ‚¬μ©ν•  λ• νƒ€μ… νλΌλ―Έν„°μ μ μ•½μ„ κ°€ν•λ©΄ κ·Έ νƒ€μ… νλΌλ―Έν„°λ¥Ό κ°€μ§€κ³ μλ” λ³€μλ¥Ό μ΅°κΈ λ” μ μ©ν•κ² ν™μ©ν•  μ μλ‹¤.
```kotlin
abstract class Bird(
    name: String,
    private val size: Int,
) : Animal(name), Comparable<Bird> {
    // μ‚¬μ΄μ¦κ°€ μ‘μ€ μƒκ°€ μ•μΌλ΅ μ¨λ‹¤.
    override fun compareTo(other: Bird): Int {
        return this.size.compareTo(other.size)
    }
}
class Sparrow : Bird("μ°Έμƒ", 100)
class Eagle : Bird("λ…μλ¦¬", 500)

fun main() {
    val cage = Cage5(mutableListOf(Eagle(), Sparrow()))
    cage.printAfterSorting() // ["μ°Έμƒ", "λ…μλ¦¬"]
}
```
## non-nullable

- μ•„λ¬΄λ° μ μ•½μ΄ μ—†λ” μ λ„¤λ¦­ ν΄λμ¤λ” nullμ„ ν—μ©ν•  μ μμµλ‹λ‹¤.
- ν•μ§€λ§ `T : Any`λ¥Ό μ‚¬μ©ν•΄ `T`λ” `non-nullable` νƒ€μ…λ§ ν—μ©λ©λ‹λ‹¤.
- `non-nullable` : μ λ€λ΅ `null`μ΄ λ  μ μ—†μµλ‹λ‹¤.
- `nullable` : `null`μ΄ λ“¤μ–΄κ° μλ„ μλ‹¤λ” μλ―Έμ…λ‹λ‹¤.
```kotlin
fun main() {
    val nullableCage = Cage5<Animal?>()
}

class Cage5<T : Any> { // Tλ” non-nullableλ§ κ°€λ¥. μ¦‰, nullμ΄ λ“¤μ–΄μ¬ μ μ—†μ.
    
}
```
